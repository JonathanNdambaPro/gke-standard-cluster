{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Event-Driven GCP - GKE Extension","text":"<p>This documentation covers the GKE Standard Cluster extension of the Event-Driven GCP project.</p>"},{"location":"#overview","title":"Overview","text":"<p>We have extended the platform to support a production-grade Kubernetes environment using GKE Standard. This replaces or augments the Cloud Run setup for workloads requiring long-running processes, stateful sets, or complex orchestration.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>VPC-Native Cluster: Integrated directly with your GCP VPC for performance and security.</li> <li>Cost-Optimized Node Pools: Separate node pools with support for Spot/Preemptible instances.</li> <li>Automated DNS: Cloud DNS management for your domain (<code>templatejojotest.com</code>).</li> <li>Global Ingress: Google Cloud Global Load Balancer with managed SSL certificates.</li> <li>Infrastructure as Code: Everything is defined in Terraform modules.</li> </ul>"},{"location":"infrastructure/","title":"Infrastructure (Terraform) \ud83c\udfd7\ufe0f","text":"<p>The infrastructure is managed via Terraform and organized into reusable modules.</p>"},{"location":"infrastructure/#modules","title":"Modules","text":""},{"location":"infrastructure/#gke-cluster","title":"<code>gke-cluster</code>","text":"<p>Provisions the GKE Standard cluster. *   Best Practice: Uses <code>remove_default_node_pool = true</code> to allow safer node pool upgrades. *   Node Pools: Defined as separate <code>google_container_node_pool</code> resources. *   Networking: Enforces VPC-native IPs using <code>ip_allocation_policy</code>.</p>"},{"location":"infrastructure/#cloud-dns","title":"<code>cloud-dns</code>","text":"<p>Manages the Google Cloud DNS zone and records. *   Inputs: Accepts a list of external IPs to create <code>A</code> records automatically. *   Outputs: Exports nameservers for domain registration.</p>"},{"location":"infrastructure/#cloud-domains","title":"<code>cloud-domains</code>","text":"<p>Optional Module. Automates the purchase and configuration of a domain name. *   Resource: <code>google_clouddomains_registration</code> *   Contact Info: Requires real physical address and contact details (Privacy Redacted by default).</p>"},{"location":"infrastructure/#network","title":"<code>network</code>","text":"<p>Sets up the foundational networking. *   Global IP: Reserves a static global IP for the GKE Ingress (<code>google_compute_global_address</code>). *   VPC/Subnet: Creates the dedicated network for the cluster.</p>"},{"location":"infrastructure/#deployment","title":"Deployment","text":"<p>To deploy the infrastructure:</p> <pre><code># 1. Initialize\nmake init_local_terraform\n\n# 2. Plan\nmake plan_local_terraform\n\n# 3. Apply\nmake apply_local_terraform\n</code></pre>"},{"location":"kubernetes/","title":"Kubernetes &amp; Ingress \u2638\ufe0f","text":"<p>This section details how applications are exposed on the GKE cluster.</p>"},{"location":"kubernetes/#ingress-architecture","title":"Ingress Architecture","text":"<p>We use the GKE Ingress Controller (GCE L7 Load Balancer).</p> <ol> <li>ManagedCertificate: Google-managed SSL certificate for <code>templatejojotest.com</code>.</li> <li>FrontendConfig: Configures HTTP-&gt;HTTPS redirection.</li> <li>Ingress: Defines the host rules and backend routing.</li> <li>Service: <code>NodePort</code> service is required for the Ingress Controller to route traffic.</li> </ol>"},{"location":"kubernetes/#troubleshooting-ingress","title":"Troubleshooting Ingress","text":"<p>Common issues and fixes during deployment.</p>"},{"location":"kubernetes/#502-bad-gateway-server-error","title":"502 Bad Gateway / Server Error","text":"<p>This usually means the Load Balancer cannot reach your Pods.</p> <p>Checklist: 1.  Health Code 502: Use <code>kubectl describe ingress</code> and look at the <code>Backends</code> column.     *   If it says <code>Unhealthy</code> or <code>Unknown</code>, the health check is failing. 2.  Port Mismatch (Common Error):     *   Container Port: Check your <code>Dockerfile</code> (e.g., <code>EXPOSE 80</code>).     *   Deployment Port: <code>containerPort</code> must match the Dockerfile port.     *   Service Port: <code>targetPort</code> must match the <code>containerPort</code>. 3.  Selector Mismatch:     *   Ensure <code>Service.spec.selector</code> matches <code>Deployment.spec.template.metadata.labels</code>.</p> <p>Debug Command:</p> <pre><code># Check if pods are running\nkubectl get pods\n\n# Check logs to confirm port\nkubectl logs -l app=&lt;your-app-label&gt;\n\n# Describe ingress to see backend health\nkubectl describe ingress &lt;ingress-name&gt;\n</code></pre>"}]}